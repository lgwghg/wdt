package com.crawler.test;

import com.alibaba.druid.support.json.JSONUtils;
import com.alibaba.fastjson.JSONArray;

import us.codecraft.webmagic.Page;
import us.codecraft.webmagic.Site;
import us.codecraft.webmagic.Spider;
import us.codecraft.webmagic.processor.PageProcessor;
import us.codecraft.webmagic.processor.example.GithubRepoPageProcessor;


public class Test implements PageProcessor{
	 private Site site = Site.me().setRetryTimes(3).setSleepTime(100);

	 public void process(Page page) {
	        page.addTargetRequests(page.getHtml().links().regex("(https://github\\.com/\\w+/\\w+)").all());
	        page.putField("author", page.getUrl().regex("https://github\\.com/(\\w+)/.*").toString());
	        page.putField("name", page.getHtml().xpath("//h1[@class='entry-title public']/strong/a/text()").toString());
	        if (page.getResultItems().get("name")==null){
	            //skip this page
	            page.setSkip(true);
	        }
	        page.putField("readme", page.getHtml().xpath("//div[@id='readme']/tidyText()"));
	    }

	    public Site getSite() {
	        return site;
	    }

	    public static void main(String[] args) {
	        //Spider.create(new GithubRepoPageProcessor()).addUrl(\"https://github.com/code4craft\").thread(5).run();
	    	
	    	//String sss = "jQuery1720794907703350529_1496649452790({\"code\":0,\"data\":{\"archives\":[{\"aid\":3171,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i2.hdslb.com\/bfs\/archive\/64c16db84b9aee95b9678cad234d7a1b139b97aa.jpg\",\"title\":\"\u3010mugen\u3011\u6709\u60c5\u73870%OP-P5\",\"attribute\":49152,\"duration\":984,\"tags\":[\"MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":1784,\"danmaku\":259,\"reply\":9,\"favorite\":3,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":1784,\"favorites\":3,\"video_review\":259,\"create\":\"2010-02-23 16:54\",\"description\":\"sm9384047 sm9404714 sm9487664\",\"mid\":9794,\"author\":\"\u8537\u8587.\u6708.\u66ae\",\"face\":\"http:\/\/i0.hdslb.com\/bfs\/face\/6549fd1dcbf4b021b842f6ed9c07e7044ffdb083.gif\"},{\"aid\":2745,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i1.hdslb.com\/bfs\/archive\/92e350c78b800d80ed346e9914a10ac21bde3d67.jpg\",\"title\":\"\u3016 MUGEN\u3017\u4f60\u6709\u795e\u7ea7\u4eba\u7269\uff1f\u6211\u6709\u79d2\u6740\u5929\u738b\",\"attribute\":49152,\"duration\":130,\"tags\":[\"\u94a2\u76d4\u7ae0\u9c7c\",\"\u795e\u7ea7\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":7174,\"danmaku\":140,\"reply\":19,\"favorite\":11,\"coin\":36,\"share\":1,\"now_rank\":0,\"his_rank\":0},\"play\":7174,\"favorites\":11,\"video_review\":140,\"create\":\"2010-02-21 05:30\",\"description\":\"\u4e0d\u8981\u5410\u69fd\u6700\u540e\u90a3\u4e2a...\",\"mid\":14315,\"author\":\"\u94a2\u76d4\u7ae0\u9c7c\",\"face\":\"http:\/\/i2.hdslb.com\/bfs\/face\/71f23f06baceb7295c99de0dee90cfb79a69543e.jpg\"},{\"aid\":1952,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i1.hdslb.com\/bfs\/archive\/dcc8f29573e86d164a4df0100c30047a711a5782.jpg\",\"title\":\"\u3010MUGEN\u3011\u5b8c\u5168\u4e1c\u65b9\u676f\u2161(3P)\uff08\u4e8c\uff09\",\"attribute\":49152,\"duration\":825,\"tags\":[\"\u4e1c\u65b9\",\"MUGEN\",\"\u4e1c\u65b9PROJECT\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":1133,\"danmaku\":29,\"reply\":3,\"favorite\":3,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":1133,\"favorites\":3,\"video_review\":29,\"create\":\"2010-02-05 02:49\",\"description\":\"\u7ee7\u7eed\u7ee7\u7eed=- =\",\"mid\":2514,\"author\":\"lostsoul\",\"face\":\"http:\/\/i1.hdslb.com\/bfs\/face\/32beab8bf9c5c6c6618b66904c98f09b8a27a585.jpg\"},{\"aid\":1895,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i1.hdslb.com\/bfs\/archive\/b755a3bc34f75afb6f53c03940ce66cc615a85ef.jpg\",\"title\":\"\u3010MUGEN\u3011\u5b8c\u5168\u4e1c\u65b9\u676f\u2161\uff08\u4e00\uff09\",\"attribute\":49152,\"duration\":818,\"tags\":[\"\u4e1c\u65b9\",\"MUGEN\",\"\u4e1c\u65b9PROJECT\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":3230,\"danmaku\":161,\"reply\":16,\"favorite\":12,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":3230,\"favorites\":12,\"video_review\":161,\"create\":\"2010-02-03 20:33\",\"description\":\"\u5b8c\u5168\u4e1c\u65b9\u676f\u7684\u540e\u7eed\uff0c\u5c31\u7b97\u6ca1\u770b\u8fc7\u4e4b\u524d\u7684\u4e5f\u4e0d\u8981\u7d27\u7684\u7a0b\u5ea6\uff08\u5f53\u7136\u53ef\u80fd\u4f1a\u5bf9\u4eba\u7269\u6709\u70b9\u70b9\u7591\u60d1\u5c31\u662f\u4e86\uff09\",\"mid\":2514,\"author\":\"lostsoul\",\"face\":\"http:\/\/i0.hdslb.com\/bfs\/face\/32beab8bf9c5c6c6618b66904c98f09b8a27a585.jpg\"},{\"aid\":1774,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i0.hdslb.com\/bfs\/archive\/d31704f75f2096e7ff6a68b2809d10e58b5fac57.jpg\",\"title\":\"[MUGEN] \u5929\u4e0b\u4e00MUGEN\u5927\u4f1aZ 1-2\",\"attribute\":49152,\"duration\":764,\"tags\":[\"MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":2665,\"danmaku\":98,\"reply\":3,\"favorite\":1,\"coin\":0,\"share\":1,\"now_rank\":0,\"his_rank\":0},\"play\":2665,\"favorites\":1,\"video_review\":98,\"create\":\"2010-02-01 01:02\",\"description\":\"\u6765\u81eaNICO,\u8282\u76ee\u5355:mylist\/16995845 \u4eba\u4eba\u90fd\u4f1a\u821e\u7a7a\u672f\u7684\u5947\u7279\u5927\u4f1a\uff0c\u4e0a\u4f1a\u5730\u5740\uff1aplus\/view.php?aid=1484\",\"mid\":7246,\"author\":\"\u5f71\u4e4b\u65e0\",\"face\":\"http:\/\/i2.hdslb.com\/bfs\/face\/279f4d51038a075f1c74fcd9b89d3e35ae3cfbab.jpg\"},{\"aid\":1764,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i1.hdslb.com\/bfs\/archive\/dcc8f29573e86d164a4df0100c30047a711a5782.jpg\",\"title\":\"\u3010mugen\u3011\u4e1c\u65b9\u7ea2\u9b54\u4e61(\u4f2a)\",\"attribute\":49152,\"duration\":759,\"tags\":[\"\u4e1c\u65b9\",\"MUGEN\",\"\u4e1c\u65b9PROJECT\",\"\u624b\u64cd\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":2348,\"danmaku\":192,\"reply\":6,\"favorite\":3,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":2348,\"favorites\":3,\"video_review\":192,\"create\":\"2010-01-31 23:02\",\"description\":\"\u624b\u64cd\u2026\u2026mugen\u4eba\u7269\u7ec4\u88c5\u642d\u914d\u7684\u7ea2\u9b54\u4e61\uff0c\u5176\u5b9e\u5c31\u662f\u683c\u6597\u5566\uff0c\u5927\u6982\u2026\u2026\u867d\u7136\u6211\u6bd4\u8f83\u60f3\u79f0\u547c\u4e3a\u201c\u6253\u4e0d\u5012\u7684\u5e15\u79cb\u8389\u201d\u6216\u8005\u201c\u6253\u4e0d\u5012\u7684\u4e8c\u5c0f\u59d0\u201d\u4ec0\u4e48\u7684\u2026\u2026\",\"mid\":2514,\"author\":\"lostsoul\",\"face\":\"http:\/\/i1.hdslb.com\/bfs\/face\/32beab8bf9c5c6c6618b66904c98f09b8a27a585.jpg\"},{\"aid\":1484,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i2.hdslb.com\/bfs\/archive\/689163c650ebd96916c9f338b61377ff5e4e1dfd.jpg\",\"title\":\"[MUGEN] \u5929\u4e0b\u4e00MUGEN\u5927\u4f1aZ OP\",\"attribute\":49152,\"duration\":688,\"tags\":[\"MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":1129,\"danmaku\":59,\"reply\":6,\"favorite\":0,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":1129,\"favorites\":0,\"video_review\":59,\"create\":\"2010-01-25 07:58\",\"description\":\"\u6765\u81easm9473535\uff0c\u8fd9\u5e74\u5934\u4e0d\u4f1a\u821e\u7a7a\u672f\u90fd\u4e0d\u597d\u610f\u601d\u548c\u522b\u4eba\u6253\u62db\u547c\",\"mid\":7246,\"author\":\"\u5f71\u4e4b\u65e0\",\"face\":\"http:\/\/i2.hdslb.com\/bfs\/face\/279f4d51038a075f1c74fcd9b89d3e35ae3cfbab.jpg\"},{\"aid\":923,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i1.hdslb.com\/bfs\/archive\/536bdd8bc21af3709d74fba4609beebc71c527c7.jpg\",\"title\":\"\u3010MUGEN\u3011\u5b8c\u5168\u4e8c\u5934\u8eab\u676f\",\"attribute\":49152,\"duration\":577,\"tags\":[\"MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":4163,\"danmaku\":532,\"reply\":13,\"favorite\":8,\"coin\":0,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":4163,\"favorites\":8,\"video_review\":532,\"create\":\"2009-12-14 16:08\",\"description\":\"\u5b8c\u5168\u81ea\u8d70\u4eba\u95f4\u51f6\u5668\u4e0a\u6d77\u4eba\u5f62\u4ffa\u306e\u5ac1\",\"mid\":2514,\"author\":\"lostsoul\",\"face\":\"http:\/\/i1.hdslb.com\/bfs\/face\/32beab8bf9c5c6c6618b66904c98f09b8a27a585.jpg\"},{\"aid\":917,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i0.hdslb.com\/bfs\/archive\/d9e76fbbf4fc2d3483dcfe60e35356c56879f560.jpg\",\"title\":\"\u3010MUGEN\u3011\u5b8c\u5168\u81ea\u91cd\u676f\",\"attribute\":49152,\"duration\":691,\"tags\":[\"MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":4273,\"danmaku\":561,\"reply\":6,\"favorite\":5,\"coin\":3,\"share\":0,\"now_rank\":0,\"his_rank\":0},\"play\":4273,\"favorites\":5,\"video_review\":561,\"create\":\"2009-12-12 16:00\",\"description\":\"\u6b64\u6bd4\u8d5b\u975e\u5e38\u81ea\u91cd\u3002\",\"mid\":2514,\"author\":\"lostsoul\",\"face\":\"http:\/\/i1.hdslb.com\/bfs\/face\/32beab8bf9c5c6c6618b66904c98f09b8a27a585.jpg\"},{\"aid\":164,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i2.hdslb.com\/bfs\/archive\/c2466006cadb6860cf3bc9aefacdbefc1ce9dc0e.jpg\",\"title\":\"\u3010MUGEN\u3011\u30b9\u30c8\u30fc\u30ea\u30fc\u52d5\u753b\u5bfe\u6297\u6226?\u7121\u9650\u4ea4\u5dee\u3010\u30aa\u30fc\u30d7\u30cb\u30f3\u30b0\u3011\",\"attribute\":32768,\"duration\":1320,\"tags\":[\"MUGEN\",\"\u30b9\u30c8\u30fc\u30ea\u30fc\u52d5\u753b\u5bfe\u6297\u6226\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":5438,\"danmaku\":62,\"reply\":25,\"favorite\":22,\"coin\":1,\"share\":2,\"now_rank\":0,\"his_rank\":0},\"play\":5438,\"favorites\":22,\"video_review\":62,\"create\":\"2009-07-16 06:55\",\"description\":\"sm4495072 \u8d85\u5f29\u7ea7\u5916\u5b87\u5b99\u4ea7\u7269\uff0c\u9996\u5148\u7ffb\u8bd1\u5e0c\u671b\uff01\uff08\u8fd9\u4e1c\u897f\u679c\u7136\u6ca1\u7ffb\u8bd1\u5c31\u6ca1\u611f\u89c9\u54ea~\uff09\uff0c\u5176\u6b21\uff0c\u6b64\u7269\u662f\u5c06MUGEN\u5236\u5404\u6545\u4e8b\u52a8\u753b\u96c6\u4e2d\u8d77\u6765\u5f00\u5927\u4f1a\u6df7\u6218\u4e4b\u7269\uff08\u6240\u4ee5\u5173\u4e8e\u4eba\u7269AI\u8fd8\u8bf7\u7559\u60c5\uff09\u3002\u53e6\uff0c\u6218\u6597\u4e2d\u753b\u9762\u4e0b\u90e8\u7684\u5bf9\u8bdd\u6846\u867d\u8bf4\u6709\u65f6\u5f88\u788d\u4e8b\uff0c\u4f46\u603b\u4f53\u800c\u8a00\u8fd8\u662f\u8d77\u5230\u7092\u70ed\u6c14\u6c1b\u7684\u4f5c\u7528\u7684\uff08\u4e5f\u662f\u6b64\u7269\u918d\u9190\",\"mid\":1501,\"author\":\"KOBI\",\"face\":\"http:\/\/static.hdslb.com\/images\/member\/noface.gif\"},{\"aid\":117,\"tid\":19,\"tname\":\"Mugen\",\"copyright\":2,\"pic\":\"http:\/\/i2.hdslb.com\/bfs\/archive\/42db546e1a4cacf1bc274ccac43effebae1c7b1c.jpg\",\"title\":\"\u3010MUGEN\u3011\",\"attribute\":32768,\"duration\":1069,\"tags\":[\"ACFUN\",\"MUGEN\",\"\u683c\u6597\",\"\u5317\u6597\u795e\u62f3\",\"\u62f3\u7687\",\"\u58eb\u5b98\u957f\",\"B\u7ad9\u6700\u65e9\u7684MUGEN\"],\"rights\":{\"bp\":0,\"elec\":0,\"download\":0,\"movie\":0,\"pay\":0,\"hd5\":0,\"no_reprint\":0},\"stat\":{\"view\":1552,\"danmaku\":439,\"reply\":57,\"favorite\":35,\"coin\":3,\"share\":4,\"now_rank\":0,\"his_rank\":0},\"play\":1552,\"favorites\":35,\"video_review\":439,\"create\":\"2009-07-14 22:59\",\"description\":\"\u989d.\u53d1\u4e0b\u8fd9\u91cc\u5427.\u6700\u8fd1\u95f2\u7684\u86cb\u75bc```\u7b2c\u4e00\u6b21\u53d1\u4e0b\u8bd5\u8bd5\",\"mid\":688,\"author\":\"\u963f\u5c14\u6258\u8389\u96c5\u2121\",\"face\":\"http:\/\/i0.hdslb.com\/bfs\/face\/634df530f63f2437178e737f947f78eb662558e8.jpg\"}],\"page\":{\"count\":28291,\"num\":1415,\"size\":20}},\"message\":\"\",\"ttl\":1});";
	    	//JSONArray jsonArray = JSONUtils.parse();
	    	
	    
	    }
}
